---
platform: linux

inputs:
- name: git-storagedir
  path: gopath/src/github.com/anothermemory/storagedir
- name: git-storagetests
  path: gopath/src/github.com/anothermemory/storagetests
- name: git-storage
  path: gopath/src/github.com/anothermemory/storage
- name: git-unit
  path: gopath/src/github.com/anothermemory/unit
- name: git-id
  path: gopath/src/github.com/anothermemory/id
- name: git-clock
  path: gopath/src/github.com/anothermemory/clock
- name: git-mock
  path: gopath/src/github.com/anothermemory/mock

run:
  path: sh
  args:
    - -exc
    - |
      export GOPATH=$(pwd)/gopath:${GOPATH} && \
      cd gopath/src/github.com/anothermemory/storagedir && \
      go version && \
      zb build && \
      zb lint -f --exclude=/usr/local/go && \
      go test -v ./...